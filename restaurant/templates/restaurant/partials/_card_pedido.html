<a href="#" class="list-group-item list-group-item-action mb-2" 
   hx-get="{% url 'restaurant:detalhes_pedido' pedido.id %}"
   hx-target="#modal-content-wrapper"
   data-bs-toggle="modal" 
   data-bs-target="#actionModal">
    <div class="d-flex w-100 justify-content-between">
        <h6 class="mb-1 fw-bold">Pedido #{{ pedido.id }}</h6>
        <small>{{ pedido.data_pedido|timesince }} atrás</small>
    </div>
    <p class="mb-1">
        {% for item in pedido.itempedido_set.all %}
            {{ item.quantidade }}x {{ item.produto.nome }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
    </p>
    <strong class="text-primary">R$ {{ pedido.total_pedido|stringformat:".2f" }}</strong>
    {# --- BOTÕES DE AÇÃO CONDICIONAIS --- #}
    {% if pedido.status == 'em_preparo' %}
    <div class="mt-2 text-end">
        <form hx-post="{% url 'restaurant:marcar_como_em_entrega' pedido.id %}" hx-target="#kanban-board" hx-swap="innerHTML" class="d-inline">
            {% csrf_token %}
            <button class="btn btn-info btn-sm">Pronto para Entrega →</button>
        </form>
    </div>
    {% elif pedido.status == 'saiu_para_entrega' %}
    <div class="mt-2 text-end">
        <form hx-post="{% url 'restaurant:marcar_como_finalizado' pedido.id %}" hx-target="#kanban-board" hx-swap="innerHTML" class="d-inline">
            {% csrf_token %}
            <button class="btn btn-success btn-sm">Finalizar Pedido ✓</button>
        </form>
    </div>
    {% endif %}
</div>
</a>